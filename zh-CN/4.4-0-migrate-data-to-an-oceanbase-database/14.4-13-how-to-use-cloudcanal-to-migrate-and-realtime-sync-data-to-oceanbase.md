# 4.13 如何使用CloudCanal迁移和实时同步数据到OceanBase

## 介绍

CloudCanal社区版是一款由[ClouGence公司](https://www.clougence.com)发行的集结构迁移、数据全量迁移/校验/订正、增量实时同步为一体的免费数据迁移同步平台。产品包含完整的产品化能力，助力企业打破数据孤岛、完成数据互融互通，从而更好的使用数据。
![image.png](https://docs.starrocks.com/static/ad1509588f7827ad6371aa2fc849ea5f/fbae3/3.11-1.png)

## 下载安装

[CloudCanal最新版下载地址](https://cloudcanal-community.oss-cn-hangzhou.aliyuncs.com/latest/cloudcanal.7z)

[CloudCanal社区版安装部署参考文档](https://doc-cloudcanal.clougence.com/operation/install_linux)

## 功能说明

- 支持的源端以及功能项：
  
  | 数据源\功能项 | 结构迁移 | 全量数据迁移 | 增量实时同步 | 
  | --- | --- | --- | --- | 
  | Oracle源端 | 支持 | 支持 | 支持 | 
  | PostgreSQL源端 | 支持 | 支持 | 支持 |
  | Greenplum源端 | 支持 | 支持 | 不支持 | 
  | MySQL源端 | 支持 | 支持 | 支持 | 

## 使用方法

CloudCanal提供了完整的产品化能力，用户在可视化界面完成数据源添加和任务创建即可自动完成结构迁移、全量迁移、增量实时同步。下文演示如何将MySQL数据库中的数据迁移同步到对端OceanBase中。其他源端同步到OceanBase也可以按照类似的方式进行。

### 前置条件

首先参考[CloudCanal安装部署参考文档](https://www.askcug.com/topic/75) 完成CloudCanal社区版的安装和部署。

### 添加数据源

- 登录 CloudCanal 平台
- 数据源管理->新增数据源
- 选择自建数据库中OceanBase

![image.png](https://www.askcug.com/assets/uploads/files/1646041871146-6a37c3f6-b2a1-4fca-b5db-8ce37eaeb180-image.png)


### 任务创建

添加好数据源之后可以按照如下步骤进行数据迁移、同步任务的创建。

- **任务管理**->**任务创建**
- 选择 **源** 和 **目标** 数据库
- 点击 下一步

![image.png](https://www.askcug.com/assets/uploads/files/1646042039253-7277e649-63c6-4810-a07f-309607ec9612-image.png)

- 选择 **增量同步**，并且启用 **全量数据初始化**
- 点击下一步

![image.png](https://www.askcug.com/assets/uploads/files/1646042117837-b2c2b010-57a5-4ad5-9a11-d63bfa5f65e3-image.png)

- 选择订阅的表，结构迁移自动创建的表会按照默认类型映射进行处理。对端表如果已经提前建好，这里也可以直接映射对端已经存在的表
- 点击下一步

![image.png](https://www.askcug.com/assets/uploads/files/1646042245392-51a5dc5c-766a-4380-b06d-867921bad904-image.png)

- 配置列映射
- 点击下一步

> tips: 如果是通过CloudCanal结构迁移自动建表，这边不允许重命名、裁剪以及列映射; 如果映射的是对端已经提前建好的表，这边支持列的裁剪和映射

![image.png](https://www.askcug.com/assets/uploads/files/1646042317818-caabefcb-a25b-434d-96f7-8d2caa8a74f6-image.png)

- 创建任务

![image.png](https://www.askcug.com/assets/uploads/files/1646042482020-31f7a359-539b-4c2c-b66c-627df0fed46b-image.png)

- 查看任务状态。任务创建后，会自动完成结构迁移、全量、增量阶段。

![image.png](https://www.askcug.com/assets/uploads/files/1646050682728-1b50e50b-b6c6-41e4-9c38-b6e256095f38-image.png)

## 参考资料

更多关于CloudCanal同步OceanBase的资料，可以查看

- [5分钟搞定MySQL/PostgreSQL/Oracle到OceanBase数据迁移同步-CloudCanal实战](https://www.askcug.com/topic/262)

- [CloudCanal官方社区](https://www.askcug.com/)
